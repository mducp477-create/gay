<!doctype html>
<html lang="vi">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>ChatBot C·∫£nh B√°o L·ª´a ƒê·∫£o ‚Äî Si√™u ƒê·∫πp</title>
<style>
  :root{
    --bg:#0f1724;
    --card:#0b1220cc;
    --glass: rgba(255,255,255,0.06);
    --accent1: #7c3aed;
    --accent2: #06b6d4;
    --success:#10b981;
    --danger:#ff5252;
    --text:#e6eef8;
    --muted:#9fb0c8;
  }
  *{box-sizing:border-box}
  html,body{height:100%;}
  body{
    margin:0;
    font-family:Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    background:
      radial-gradient(1200px 600px at 10% 20%, rgba(124,58,237,0.12), transparent 8%),
      radial-gradient(900px 500px at 90% 80%, rgba(6,182,212,0.08), transparent 10%),
      var(--bg);
    color:var(--text);
    -webkit-font-smoothing:antialiased;
    -moz-osx-font-smoothing:grayscale;
    padding:28px;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Container */
  .app {
    width:100%;
    max-width:1100px;
    height:82vh;
    display:grid;
    grid-template-columns: 360px 1fr;
    gap:20px;
    align-items:stretch;
  }

  /* Sidebar */
  .sidebar{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:16px;
    padding:18px;
    box-shadow: 0 6px 30px rgba(2,6,23,0.6), 0 0 0 1px rgba(255,255,255,0.02) inset;
    display:flex;
    flex-direction:column;
    gap:12px;
    position:relative;
    overflow:hidden;
    backdrop-filter: blur(8px) saturate(140%);
  }

  .brand{
    display:flex;
    gap:12px;
    align-items:center;
  }
  .logo {
    width:56px;height:56px;border-radius:12px;
    background:linear-gradient(135deg,var(--accent1),var(--accent2));
    display:flex;align-items:center;justify-content:center;
    box-shadow:0 6px 18px rgba(124,58,237,0.24);
    color:white;font-weight:700;font-size:18px;
  }
  .brand h1{margin:0;font-size:16px}
  .brand p{margin:0;font-size:12px;color:var(--muted)}

  .quick {
    display:flex;flex-direction:column;gap:8px;margin-top:12px;
  }
  .chip {
    background:linear-gradient(90deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    border-radius:10px;padding:10px 12px;cursor:pointer;
    display:flex;justify-content:space-between;align-items:center;
    font-size:13px;color:var(--muted);
    transition:transform .18s ease, box-shadow .18s;
  }
  .chip:hover{transform:translateY(-4px); box-shadow: 0 8px 20px rgba(2,6,23,0.6);}
  .chip .k{font-weight:600;color:var(--text)}

  .tips {
    margin-top:auto;
    padding:12px;border-radius:12px;background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);
    font-size:13px;color:var(--muted);
  }
  .tips .title{font-weight:700;margin-bottom:6px;color:var(--text)}

  /* Chat area */
  .chat-wrap{
    background: linear-gradient(180deg, rgba(6,12,20,0.55), rgba(2,6,23,0.5));
    border-radius:16px;padding:16px;display:flex;flex-direction:column;
    box-shadow: 0 8px 40px rgba(2,6,23,0.6);
    overflow:hidden;
    border: 1px solid rgba(255,255,255,0.03);
  }

  .header {
    display:flex;align-items:center;gap:12px;padding-bottom:8px;border-bottom:1px solid rgba(255,255,255,0.03);
  }
  .header .title{
    font-size:18px;font-weight:700;margin:0;
  }
  .header .subtitle{font-size:13px;color:var(--muted);margin:0}

  .messages{
    padding:18px;flex:1;overflow:auto;display:flex;flex-direction:column;gap:12px;
  }

  .msg{
    max-width:72%;
    padding:12px 14px;border-radius:12px;
    box-shadow: 0 6px 18px rgba(2,6,23,0.45);
    position:relative;
    line-height:1.35;font-size:14px;
  }

  .msg.bot{
    background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    align-self:flex-start;color:var(--text);
    border:1px solid rgba(255,255,255,0.03);
  }
  .msg.user{
    background: linear-gradient(90deg,var(--accent2),var(--accent1));
    color:white;align-self:flex-end;border: none;
  }

  .msg .meta{font-size:11px;color:rgba(255,255,255,0.6);margin-top:6px}
  .badge{display:inline-block;padding:4px 6px;border-radius:8px;font-size:12px;margin-left:8px}

  .detected{
    margin-top:6px;padding:8px;border-radius:10px;background:rgba(255,80,80,0.08);color:var(--danger);font-weight:600;border:1px solid rgba(255,80,80,0.12)
  }

  .controls{
    display:flex;gap:10px;padding-top:12px;border-top:1px solid rgba(255,255,255,0.03);
    align-items:center;
  }
  .input-wrap{flex:1;display:flex;gap:8px;align-items:center}
  .input{
    flex:1;padding:12px 14px;border-radius:12px;border:none;outline:none;background:var(--glass);color:var(--text);
    box-shadow:inset 0 1px 0 rgba(255,255,255,0.02);
  }
  button.btn{
    background:linear-gradient(90deg,var(--accent1),var(--accent2));border:none;padding:10px 14px;border-radius:12px;color:white;font-weight:700;cursor:pointer;
    box-shadow:0 8px 22px rgba(124,58,237,0.18);
  }
  button.ghost{
    background:transparent;border:1px solid rgba(255,255,255,0.06);padding:10px 12px;border-radius:12px;color:var(--muted);cursor:pointer;
  }

  /* footer small */
  .small{font-size:12px;color:var(--muted)}

  /* highlight keywords */
  mark.hl{
    background:linear-gradient(90deg, rgba(255,230,128,0.12), rgba(255,90,90,0.06));
    padding:2px 6px;border-radius:6px;color:var(--text);
    font-weight:700;border:1px solid rgba(255,255,255,0.03);
  }

  /* responsive */
  @media (max-width:900px){
    .app{grid-template-columns:1fr; padding:12px; height:92vh;}
    .sidebar{order:2}
    .chat-wrap{order:1}
  }
</style>
</head>
<body>
  <div class="app" role="application" aria-label="Chatbot c·∫£nh b√°o l·ª´a ƒë·∫£o">
    <aside class="sidebar" aria-hidden="false">
      <div class="brand">
        <div class="logo" aria-hidden="true">‚ö†Ô∏è</div>
        <div>
          <h1>Anti-Scam Chat</h1>
          <p>Gi√∫p ph√°t hi·ªán & x·ª≠ l√Ω l·ª´a ƒë·∫£o ‚Äî mi·ªÖn ph√≠</p>
        </div>
      </div>

      <div class="quick" role="list">
        <div class="chip" data-presets="tin-nhan-gia">
          <div class="k">Tin nh·∫Øn m∆∞·ª£n ti·ªÅn / chuy·ªÉn kho·∫£n</div>
          <div class="muted">M·∫°o danh b·∫°n b√®</div>
        </div>

        <div class="chip" data-presets="gift-fake">
          <div class="k">Th∆∞·ªüng/Qu√† t·∫∑ng gi·∫£</div>
          <div class="muted">Y√™u c·∫ßu click link</div>
        </div>

        <div class="chip" data-presets="bank-verify">
          <div class="k">X√°c minh ng√¢n h√†ng</div>
          <div class="muted">Y√™u c·∫ßu m√£ OTP</div>
        </div>
      </div>

      <div class="tips" role="region" aria-label="L·ªùi khuy√™n">
        <div class="title">M·∫πo nhanh</div>
        <div>- Kh√¥ng g·ª≠i m√£ OTP cho b·∫•t k·ª≥ ai.</div>
        <div>- Ki·ªÉm tra URL tr∆∞·ªõc khi click; s·ªë l·∫° h√£y g·ªçi l·∫°i ƒë·ªÉ x√°c th·ª±c.</div>
        <div>- N·∫øu nghi ng·ªù: ch·ª•p l·∫°i, b√°o c√°o cho ng√¢n h√†ng & c∆° quan ch·ª©c nƒÉng.</div>
      </div>
    </aside>

    <main class="chat-wrap">
      <div class="header">
        <div style="display:flex;flex-direction:column;">
          <div class="title">ChatBot C·∫£nh B√°o L·ª´a ƒê·∫£o</div>
          <div class="subtitle">G√µ tin nh·∫Øn d∆∞·ªõi -> bot s·∫Ω ph√¢n t√≠ch, ƒë√°nh gi√° r·ªßi ro v√† g·ª£i √Ω h√†nh ƒë·ªông</div>
        </div>
        <div style="margin-left:auto;display:flex;gap:8px;align-items:center">
          <button class="ghost" id="saveBtn" title="L∆∞u cu·ªôc tr√≤ chuy·ªán">üíæ L∆∞u</button>
          <button class="ghost" id="reportBtn" title="M·∫´u b√°o c√°o">üì£ B√°o c√°o</button>
        </div>
      </div>

      <div class="messages" id="messages" aria-live="polite" aria-atomic="false">
        <!-- initial bot message -->
        <div class="msg bot" data-id="b0">
          <div><strong>Ch√†o b·∫°n!</strong> M√¨nh s·∫Ω gi√∫p ki·ªÉm tra tin nh·∫Øn ho·∫∑c li√™n h·ªá c√≥ d·∫•u hi·ªáu l·ª´a ƒë·∫£o. G·ª≠i n·ªôi dung ·ªü khung nh·∫≠p nh√©.</div>
          <div class="meta small">M·∫πo: th·ª≠ d√°n tin nh·∫Øn gi·∫£ nh∆∞ "B·∫°n tr√∫ng th∆∞·ªüng, vui l√≤ng click..."</div>
        </div>
      </div>

      <div class="controls" role="toolbar" aria-label="Controls">
        <div class="input-wrap">
          <input id="input" class="input" placeholder="D√°n tin nh·∫Øn / m√¥ t·∫£ ·ªü ƒë√¢y ‚Äî v√≠ d·ª•: 'G·ª≠i m√£ OTP 123456 ƒë·ªÉ nh·∫≠n qu√†'..." aria-label="N·ªôi dung tin nh·∫Øn">
        </div>
        <button class="btn" id="send">G·ª≠i</button>
      </div>
    </main>
  </div>

<script>
(function(){
  // Keyword detection & reason mapping
  const KEYWORDS = [
    {k:['otp','m√£ otp','m√£ x√°c nh·∫≠n','one-time password','verification code'], reason:'Y√™u c·∫ßu m√£ OTP ‚Äî <strong>R·∫§T NGUY HI·ªÇM</strong>.'},
    {k:['chuy·ªÉn kho·∫£n','chuy·ªÉn ti·ªÅn','g·ª≠i ti·ªÅn','s·ªë tk','stk','s·ªë t√†i kho·∫£n'], reason:'Y√™u c·∫ßu chuy·ªÉn ti·ªÅn ‚Äî c·∫ßn x√°c th·ª±c tr·ª±c ti·∫øp v·ªõi ch·ªß t√†i kho·∫£n.'},
    {k:['tr√∫ng th∆∞·ªüng','gi·∫£i th∆∞·ªüng','qu√† t·∫∑ng','nh·∫≠n qu√†','click link'], reason:'Chi√™u tr√≤ tr√∫ng th∆∞·ªüng/nh·∫≠n qu√† ‚Äî th∆∞·ªùng ch·ª©a link gi·∫£ m·∫°o.'},
    {k:['x√°c minh ng√¢n h√†ng','verify account','block t√†i kho·∫£n','b·ªã kho√°'], reason:'C·ªë t√¨nh t·∫°o √°p l·ª±c ƒë·ªÉ l·∫•y th√¥ng tin ‚Äî ki·ªÉm tra tr·ª±c ti·∫øp v·ªõi ng√¢n h√†ng.'},
    {k:['m·∫°o danh','b·∫°n b√®','t√¥i l√†','t g·ªçi ƒë√¢y'], reason:'M·∫°o danh ng∆∞·ªùi quen ‚Äî li√™n h·ªá tr·ª±c ti·∫øp qua s·ªë/·ª©ng d·ª•ng kh√°c ƒë·ªÉ x√°c nh·∫≠n.'},
    {k:['virus','c·∫ßn t·∫£i','c√†i ƒë·∫∑t','apk','file'], reason:'Y√™u c·∫ßu t·∫£i file/·ª©ng d·ª•ng ‚Äî c√≥ th·ªÉ ch·ª©a m√£ ƒë·ªôc.'}
  ];

  const messagesEl = document.getElementById('messages');
  const inputEl = document.getElementById('input');
  const sendBtn = document.getElementById('send');
  const saveBtn = document.getElementById('saveBtn');
  const reportBtn = document.getElementById('reportBtn');

  function appendMessage(text, who='bot', meta='') {
    const div = document.createElement('div');
    div.className = 'msg ' + (who === 'user' ? 'user' : 'bot');
    div.innerHTML = text + (meta ? ('<div class="meta small">'+meta+'</div>') : '');
    messagesEl.appendChild(div);
    messagesEl.scrollTop = messagesEl.scrollHeight;
  }

  function highlightText(text, hits){
    if(!hits || hits.length===0) return escapeHtml(text);
    // simple replace: highlight each keyword
    let out = escapeHtml(text);
    hits.forEach(h=>{
      const re = new RegExp('('+escapeRegExp(h)+')','ig');
      out = out.replace(re, '<mark class="hl">$1</mark>');
    });
    return out;
  }

  function escapeHtml(s){
    return s.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; });
  }
  function escapeRegExp(s){ return s.replace(/[.*+?^${}()|[\]\\]/g, '\\$&'); }

  function analyze(text){
    const lowered = text.toLowerCase();
    let hits = new Set();
    let reasons = [];
    let score = 0;
    KEYWORDS.forEach(entry=>{
      entry.k.forEach(kw=>{
        if(lowered.includes(kw)){
          hits.add(kw);
          reasons.push(entry.reason);
          // score weighting: OTP and money moves are heavier
          if(/otp|m√£ otp|m√£ x√°c nh·∫≠n/.test(kw)) score += 5;
          else if(/chuy·ªÉn|s·ªë tk|stk|t√†i kho·∫£n/.test(kw)) score += 4;
          else score += 2;
        }
      });
    });
    // suspicious URL detection
    const urlRegex = /(https?:\/\/)?([a-z0-9-]+\.)+[a-z]{2,}([\/\?\=\&].*)?/i;
    if(urlRegex.test(text)) {
      hits.add('link');
      reasons.push('Ph√°t hi·ªán link/URL ‚Äî <strong>Kh√¥ng click</strong> n·∫øu kh√¥ng ch·∫Øc ch·∫Øn.');
      score += 3;
    }
    // phone number asking to send code
    const phoneRegex = /(\+?\d{8,12}|\d{7,12})/;
    if(phoneRegex.test(text) && /g·ª≠i|nh·∫Øn|sms|call|s·ªë ƒëi·ªán tho·∫°i|sƒët/.test(lowered)) {
      hits.add('phone');
      reasons.push('Y√™u c·∫ßu li√™n h·ªá g·ªçi/nh·∫Øn qua s·ªë ‚Äî c√≥ th·ªÉ l√† m·ªìi ƒë·ªÉ chuy·ªÉn ti·ªÅn.');
      score += 2;
    }

    // final risk category
    let risk = 'Th·∫•p';
    if(score >= 8) risk = 'C·ª±c cao';
    else if(score >= 5) risk = 'Cao';
    else if(score >= 3) risk = 'Trung b√¨nh';

    return {hits:Array.from(hits), reasons: Array.from(new Set(reasons)), score, risk};
  }

  function botRespond(userText){
    // analyze first
    const res = analyze(userText);
    const highlighted = highlightText(userText, res.hits);
    appendMessage('<div><strong>N·ªôi dung b·∫°n g·ª≠i:</strong><div style="margin-top:8px;padding:10px;border-radius:10px;background:rgba(255,255,255,0.02);font-size:13px;color:var(--muted)">'+highlighted+'</div></div>','bot');
    // Construct analysis message
    let analysisHtml = `<div style="margin-top:8px"><strong>Ph√¢n t√≠ch:</strong>`;
    analysisHtml += `<div style="margin-top:6px">M·ª©c r·ªßi ro: <span class="badge" style="background:${res.risk==='C·ª±c cao'? 'var(--danger)':'linear-gradient(90deg,var(--accent1),var(--accent2))'};color:white;padding:6px 8px;border-radius:8px">${res.risk}</span></div>`;
    if(res.reasons.length){
      analysisHtml += '<ul style="margin-top:8px;padding-left:16px;color:var(--muted)">';
      res.reasons.forEach(r=> analysisHtml += `<li>${r}</li>`);
      analysisHtml += '</ul>';
    } else {
      analysisHtml += '<div style="margin-top:8px;color:var(--muted)">Kh√¥ng t√¨m th·∫•y d·∫•u hi·ªáu r√µ r√†ng ‚Äî v·∫´n n√™n th·∫≠n tr·ªçng.</div>';
    }
    // action suggestions
    analysisHtml += `<div style="margin-top:10px"><strong>G·ª£i √Ω h√†nh ƒë·ªông:</strong><ol style="margin-top:6px;color:var(--muted)"><li>Kh√¥ng cung c·∫•p m√£ OTP ho·∫∑c th√¥ng tin th·∫ª.</li><li>Kh√¥ng click link l·∫°, ki·ªÉm tra URL.</li><li>Li√™n h·ªá ng∆∞·ªùi g·ª≠i (n·∫øu m·∫°o danh) b·∫±ng 1 k√™nh kh√°c ƒë·ªÉ x√°c nh·∫≠n.</li><li>N·∫øu m·∫•t ti·ªÅn: b√°o ng√¢n h√†ng & l∆∞u l·∫°i b·∫±ng ch·ª©ng.</li></ol></div>`;
    analysisHtml += `<div style="margin-top:8px"><button class="ghost" onclick="copyToClipboard('report')">Sao ch√©p m·∫´u b√°o c√°o</button> <button class="ghost" onclick="openReportModal()">M·ªü m·∫´u b√°o c√°o</button></div>`;
    analysisHtml += `</div>`;
    appendMessage(analysisHtml,'bot');
    // if high risk, append a red detected block
    if(res.risk === 'C·ª±c cao' || res.risk === 'Cao') {
      const det = document.createElement('div');
      det.className = 'detected';
      det.innerHTML = (res.risk === 'C·ª±c cao' ? '‚ÄºÔ∏è C·∫£nh b√°o: R·∫•t c√≥ kh·∫£ nƒÉng l√† l·ª´a ƒë·∫£o. H√£y d·ª´ng m·ªçi t∆∞∆°ng t√°c v√† b√°o c√°o.' : '‚ö†Ô∏è C·∫£nh b√°o: C√≥ d·∫•u hi·ªáu l·ª´a ƒë·∫£o ‚Äî h√£y th·∫≠n tr·ªçng.');
      messagesEl.appendChild(det);
      messagesEl.scrollTop = messagesEl.scrollHeight;
    }
  }

  // Send handler
  function send(){
    const text = inputEl.value.trim();
    if(!text) return;
    appendMessage(escapeHtml(text),'user');
    inputEl.value = '';
    // bot typing simulation
    setTimeout(()=> botRespond(text), 450);
  }

  // keyboard enter
  inputEl.addEventListener('keydown', function(e){
    if(e.key === 'Enter' && !e.shiftKey){ e.preventDefault(); send(); }
  });
  sendBtn.addEventListener('click', send);

  // quick chips
  document.querySelectorAll('.chip').forEach(ch=>{
    ch.addEventListener('click', ()=>{
      const p = ch.getAttribute('data-presets');
      const samples = {
        'tin-nhan-gia': "Ch√†o b·∫°n, t·ªõ ƒëang m∆∞·ª£n g·∫•p, b·∫°n chuy·ªÉn gi√∫p 2 tri·ªáu v√†o STK 0123456789 nh√©. M√¨nh l√† B√¨nh (b·∫°n c≈©).",
        'gift-fake': "B·∫°n ƒë√£ tr√∫ng th∆∞·ªüng 5,000,000ƒë! Vui l√≤ng click http://bit.ly/nhanqua ƒë·ªÉ nh·∫≠n.",
        'bank-verify': "Ng√¢n h√†ng XYZ: T√†i kho·∫£n c·ªßa b·∫°n b·ªã kho√°, vui l√≤ng x√°c minh b·∫±ng c√°ch g·ª≠i m√£ OTP."
      };
      inputEl.value = samples[p] || '';
      inputEl.focus();
    });
  });

  // Save conversation: export as text
  saveBtn.addEventListener('click', ()=>{
    const nodes = messagesEl.querySelectorAll('.msg');
    let text = '=== Cu·ªôc tr√≤ chuy·ªán v·ªõi Anti-Scam Chat ===\n\n';
    nodes.forEach(n=>{
      const who = n.classList.contains('user') ? 'B·∫°n' : 'Bot';
      // remove HTML tags for text export
      const content = n.innerText.replace(/\n{2,}/g,'\n').trim();
      text += `${who}: ${content}\n\n`;
    });
    const blob = new Blob([text], {type:'text/plain;charset=utf-8'});
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url; a.download = 'antiscam_chat.txt'; document.body.appendChild(a);
    a.click(); a.remove();
    URL.revokeObjectURL(url);
  });

  // report template
  window.openReportModal = function(){
    // create a quick modal with a report template to copy/paste
    const template = [
      '--- M·∫™U B√ÅO C√ÅO L·ª™A ƒê·∫¢O ---',
      'Ng√†y gi·ªù: ' + new Date().toLocaleString('vi-VN'),
      'N·ªôi dung/tin nh·∫Øn nghi ng·ªù:',
      '"<d√°n n·ªôi dung ƒë√¢y>"',
      'Ngu·ªìn (s·ªë ƒëi·ªán tho·∫°i/FB/Zalo/Email): <v√≠ d·ª• +84...>',
      'H√†nh ƒë·ªông b·∫°n ƒë√£ l√†m: (g·ªçi x√°c minh / kh√¥ng click link / b√°o ng√¢n h√†ng...)',
      'Y√™u c·∫ßu x·ª≠ l√Ω: Mong c∆° quan/ƒë∆°n v·ªã h·ªó tr·ª£ ki·ªÉm tra & ch·∫∑n t√†i kho·∫£n/URL.'
    ].join('\\n\\n');
    copyTextToClipboard(template);
    alert('M·∫´u b√°o c√°o ƒë√£ ƒë∆∞·ª£c sao ch√©p. D√°n v√†o email ho·∫∑c m·∫´u b√°o c√°o c·ªßa c∆° quan ƒë·ªÉ g·ª≠i.');
  };

  // copy helper
  function copyTextToClipboard(t){
    const ta = document.createElement('textarea');
    ta.value = t; document.body.appendChild(ta);
    ta.select(); document.execCommand('copy'); ta.remove();
  }
  window.copyToClipboard = function(mode){
    if(mode === 'report') openReportModal();
  };

  // report button: opens mailto with prefilled subject + body (user can edit)
  reportBtn.addEventListener('click', ()=>{
    const subj = encodeURIComponent('B√°o c√°o nghi ng·ªù l·ª´a ƒë·∫£o');
    const body = encodeURIComponent([
      'K√≠nh g·ª≠i b·ªô ph·∫≠n h·ªó tr·ª£,',
      '',
      'T√¥i mu·ªën b√°o c√°o m·ªôt tin nh·∫Øn/nghi v·∫•n l·ª´a ƒë·∫£o, th√¥ng tin nh∆∞ sau:',
      '',
      'Ng√†y gi·ªù: ' + new Date().toLocaleString('vi-VN'),
      'N·ªôi dung: ',
      '',
      '(D√°n n·ªôi dung t·∫°i ƒë√¢y)',
      '',
      'Mong ƒë∆∞·ª£c h·ªó tr·ª£. Xin c·∫£m ∆°n.'
    ].join('\\n'));
    window.location.href = 'mailto:support@example.com?subject='+subj+'&body='+body;
  });

  // small sanitize for user messages stored
  function escapeHtml(s){
    return s.replace(/[&<>"']/g, function(m){ return ({'&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;'})[m]; });
  }

  // initial focus
  inputEl.focus();

  // accessibility: announce loaded
  setTimeout(()=> {
    const live = document.createElement('div'); live.setAttribute('aria-live','polite'); live.style.position='absolute'; live.style.left='-9999px';
    live.innerText = 'ChatBot s·∫µn s√†ng. G√µ tin nh·∫Øn ƒë·ªÉ b·∫Øt ƒë·∫ßu.';
    document.body.appendChild(live);
  }, 1000);
})();
</script>
</body>
</html>
